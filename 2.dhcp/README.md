# üß≠ Servidor DHCP (Kea DHCP)


Este documento descreve a instala√ß√£o e configura√ß√£o do **servidor DHCP (Kea DHCP)** utilizado nos laborat√≥rios da UC07.

---

<br/>

## üéØ Objetivo

O **DHCP (Dynamic Host Configuration Protocol)** √© respons√°vel por **atribuir automaticamente endere√ßos IP, gateway, DNS e m√°scara de rede** aos clientes de uma rede local, simplificando o gerenciamento de endere√ßamento IP e reduzindo erros de configura√ß√£o manual.

---

## üß© Descri√ß√£o do Servi√ßo

| Item | Detalhe |
|------|----------|
| **Software** | Kea DHCP (ISC) |
| **Sistema operacional** | Debian 13 (Trixie) |
| **Faixa de IPs** | `10.0.3.11 ‚Äì 10.0.3.99` |
| **Gateway padr√£o** | `10.0.3.1` |
| **Servidor DHCP** | `10.0.3.200` |
| **Dom√≠nio** | `empresatech.example` |
| **Arquivo principal** | `/etc/kea/kea-dhcp4.conf` |

---

<br/>

## ‚öôÔ∏è Instala√ß√£o e Configura√ß√£o do Kea DHCP Server


### 1Ô∏è‚É£ Instalar o pacote

```bash
sudo apt update
sudo apt install kea-dhcp4-server -y
```

---

<br/>

### 2Ô∏è‚É£ Fazer backup da configura√ß√£o original

```bash
sudo mv /etc/kea/kea-dhcp4.conf /etc/kea/kea-dhcp4.conf.bak
```
---

<br/>

### 3Ô∏è‚É£ Criar o novo arquivo de configura√ß√£o

Abra o arquivo principal:

```bash
sudo vim /etc/kea/kea-dhcp4.conf
```

Copie o conte√∫do do arquivo [`kea-dhcp4.conf`](./configs/kea-dhcp4.conf) deste reposit√≥rio e personalize de acordo com o seu cen√°rio de rede (interface, gateway, faixa de IPs, dom√≠nio e DNS).

---

<br/>

### 4Ô∏è‚É£ Criar diret√≥rios para logs e leases

```bash
sudo mkdir -p /var/log/kea /var/lib/kea
```

Esses diret√≥rios armazenam os **logs de execu√ß√£o** e as **concess√µes de IPs (leases)** realizadas pelo servidor DHCP.

---

<br/>

### 5Ô∏è‚É£ Validar a configura√ß√£o

Antes de iniciar o servi√ßo, verifique se h√° erros no arquivo de configura√ß√£o:

```bash
sudo kea-dhcp4 -c /etc/kea/kea-dhcp4.conf -W
```

Se n√£o houver erros, prossiga com a execu√ß√£o.

---

<br/>

### 6Ô∏è‚É£ Habilitar e iniciar o servi√ßo

```bash
sudo systemctl enable --now kea-dhcp4-server
sudo systemctl status kea-dhcp4-server
```

---

<br/>

### 7Ô∏è‚É£ Testar o funcionamento

Conecte um cliente √† rede e verifique se o endere√ßo IP foi atribu√≠do automaticamente.

Para visualizar os registros de leases (endere√ßos concedidos):

```bash
sudo cat /var/lib/kea/kea-leases4.csv
```
---
