# üß≠ Servidor DNS (BIND9)

<br/>

Este documento descreve a instala√ß√£o e configura√ß√£o do **servidor DNS (BIND9)** adotado nos laborat√≥rios da UC07.

---

<br/>

## üéØ Objetivo

O **DNS (Domain Name System)** resolve **nomes de host em endere√ßos IP** (e vice‚Äëversa), permitindo o acesso a servi√ßos por nomes amig√°veis e padronizados dentro da rede.

---

<br/>

## üß© Descri√ß√£o do Servi√ßo

| Item | Detalhe |
|------|--------|
| **Software** | BIND 9 (ISC) |
| **Sistema operacional** | Debian 13 (Trixie) |
| **Endere√ßo IP** | `10.0.3.201` |
| **Gateway padr√£o** | `10.0.3.1` |
| **Endere√ßo DNS** | `127.0.0.1` |
| **Dom√≠nio** | `empresatech.example` |
| **Zonas** | Direta: <br/>`empresatech.example`<br/> <br/>Reversas: <br/>`2.0.10.in-addr.arpa` (DMZ ‚Äì 10.0.2.0/24) <br/>`3.0.10.in-addr.arpa` (LANEmpresa ‚Äì 10.0.3.0/24) |
| **Arquivos principais** | `/etc/bind/named.conf.options`, `/etc/bind/named.conf.local`, `/etc/bind/db.empresatech.example`, `/etc/bind/db.10.0.2`, `/etc/bind/db.10.0.3` |

---

<br/>

## ‚öôÔ∏è Instala√ß√£o e Configura√ß√£o do BIND9

<br/>

### 1Ô∏è‚É£ Instalar os pacotes

```bash
sudo apt update
sudo apt install bind9 bind9-utils bind9-dnsutils -y
```

---

<br/>

### 2Ô∏è‚É£ Configurar op√ß√µes globais

Edite o arquivo de op√ß√µes do BIND:

```bash
sudo vim /etc/bind/named.conf.options
```

Copie o conte√∫do do arquivo [`named.conf.options`](./configs/named.conf.options) dispon√≠vel neste reposit√≥rio e ajuste conforme a infraestrutura.

---

<br/>

### 3Ô∏è‚É£ Definir as zonas

Edite o arquivo de zonas:

```bash
sudo vim /etc/bind/named.conf.local
```

Inclua as defini√ß√µes conforme o arquivo [`named.conf.local`](./configs/named.conf.local) deste reposit√≥rio (zona direta + zonas reversas).

---

<br/>

### 4Ô∏è‚É£ Criar a zona direta

Crie/edite a base de zona direta do dom√≠nio:

```bash
sudo vim /etc/bind/db.empresatech.example
```

Utilize o conte√∫do de [`db.empresatech.example`](./configs/db.empresatech.example) e personalize registros (A, CNAME, NS, etc.) conforme seu ambiente.

---

<br/>

### 5Ô∏è‚É£ Criar as zonas reversas

DMZ (`10.0.2.0/24`):

```bash
sudo vim /etc/bind/db.10.0.2
```
Preencha a partir do arquivo [`db.10.0.2`](./configs/db.10.0.2)

<br/>

Clientes (`10.0.3.0/24`):

```bash
sudo vim /etc/bind/db.10.0.3
```

Preencha a partir do arquivo [`db.10.0.3`](./configs/db.10.0.3).

---

<br/>

### 6Ô∏è‚É£ Validar a configura√ß√£o

Execute as checagens:

```bash
sudo named-checkconf
sudo named-checkzone empresatech.example /etc/bind/db.empresatech.example
sudo named-checkzone 2.0.10.in-addr.arpa /etc/bind/db.10.0.2
sudo named-checkzone 3.0.10.in-addr.arpa /etc/bind/db.10.0.3
```

---

<br/>

### 7Ô∏è‚É£ Reiniciar e habilitar o servi√ßo

```bash
sudo systemctl restart bind9
sudo systemctl enable bind9
sudo systemctl status bind9
```

---

<br/>

## üîç Testes r√°pidos

```bash
# Resolu√ß√£o direta
dig @localhost www.empresatech.example +short

# Resolu√ß√£o reversa (exemplo para 10.0.3.201)
dig @localhost -x 10.0.3.201 +short
```

> Se receber respostas coerentes, a configura√ß√£o est√° funcional.

---
