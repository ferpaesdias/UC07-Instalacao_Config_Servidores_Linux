# Guia: Criar uma VM com **Debian 13 (Trixie)** no VirtualBox

Este passo a passo mostra como criar a VM pelo assistente gr√°fico do VirtualBox para a tarefa proposta neste reposit√≥rio.

<br/>

## 1) Baixar a ISO do Debian 13
- Acesse o site oficial do Debian e baixe a ISO [**amd64 netinst**](https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-13.1.0-amd64-netinst.iso). 
- Verifique o **checksum** (opcional, recomendado) para garantir a integridade da imagem.

<br/>

Salve a ISO, por exemplo, em:
- **Linux:** `~/ISO/Debian-13-netinst-amd64.iso`
- **Windows:** `C:\ISOs\Debian-13-netinst-amd64.iso`
- **macOS:** `~/Downloads/Debian-13-netinst-amd64.iso`

---

<br/>

## 2) Par√¢metros sugeridos das VMs



| Componente | Valor sugerido | Observa√ß√µes |
|---|---|---|
| Nome | `Firewall` | Use o mesmo nome do Hostname |
| Tipo/SO | Linux / Debian (64‚Äëbit) | O VirtualBox detecta automaticamente pela ISO em vers√µes mais novas |
| RAM | 1024‚ÄØMB | 01 GB √© suficiente para a nossa proposta |
| CPUs | 1 vCPU |  |
| Disco | 15‚ÄØGB (VDI din√¢mico) | Controladora SATA; VDI din√¢mico economiza espa√ßo |
| V√≠deo | 16‚ÄØMB, VMSVGA |  |
| Rede | Bridge | Para acesso √† Internet |
| | Rede Interna "DMZ"| Para a rede DMZ |
| | Rede Interna "LAN_Empresa"| Para a rede LAN Empresa |

<br/>

>[!NOTE]
> Os valores acima s√£o sugeridos para o ambiente deste reposit√≥rio. 

---

<br/>

## 3) Criar a VM pelo **Assistente Gr√°fico** (GUI)

<br/>

### 1. **Abrir o VirtualBox** ‚Üí **Novo** (ou *Machine ¬ª New*).  

![vBox Novo](../Imagens/vbox_clique_novo.png)

<br/>

### 2. Nome e Sistema Operacional

  - **Nome**: `Firewall`
  - **Image ISO**: Selecione o arquivo `.iso` do Debian   
  - **Tipo**: Linux
  - **Vers√£o**: Debian (64‚Äëbit)
  - **Pular Instala√ß√£o Desassistida**: Marque

![vBox Nome Iso](../Imagens/vbox_nome_iso.png)

<br/>

### 3. Hardware
  - **Mem√≥ria Base**: `1024 MB`
  - **Processadores**: 1 CPU   
  - **Habilitar EFI**: Desmarque

![vBox Hardware](../Imagens/vbox_hardware.png)

<br/>

### 4. Disco R√≠gido

  - **Tamaho do Disco Virtual**: 15 GB

![vBox Hardware](../Imagens/vbox_disco.png)

<br/>

### 5. Clique em **Finalizar**

Nada demais, s√≥ clicar em `Finalizar` mesmo ü§∑‚Äç‚ôÇÔ∏è.

<br/>

### 6. Configure as interfaces de rede

  - Na tela do VirtualBox, selecione a VM **Firewall** e clique em **Configura√ß√µes**

![vBox Hardware](../Imagens/vbox_config.png)

<br/>

  - No menu lateral, clique em **Rede** e configure o `Adaptador 1` conforme est√° abaixo:
    - **Habilitar Placa de Rede**: Marque 
    - **Conectado a**: `Placa em modo Bridge`

![vBox Hardware](../Imagens/vbox_configadapt1.png)

<br/>

  - No menu lateral, clique em **Rede** e configure o `Adaptador 2` conforme est√° abaixo:
    - **Habilitar Placa de Rede**: Marque 
    - **Conectado a**: `Rede Interna`
    - **Nome**: `DMZ`

![vBox Hardware](../Imagens/vbox_configadapt2.png)

<br/>

  - No menu lateral, clique em **Rede** e configure o `Adaptador 3` conforme est√° abaixo:
    - **Habilitar Placa de Rede**: Marque 
    - **Conectado a**: `Rede Interna`
    - **Nome**: `LanEmpresa`

![vBox Hardware](../Imagens/vbox_configadapt3.png)

<br/>

---

<br/>

## 4) Instala√ß√£o do Debian 13 

<br/>

### 1. Iniciar a VM
  - Selecione a VM e clique **Firewall** em **Iniciar**

![vBox Hardware](../Imagens/vbox_iniciar_vm.png)

<br/>

### 2. Menu de instala√ß√£o do Debian
  - Selecione **Graphical Install**

![vBox Hardware](../Imagens/vbox_debian_graphicinstall.png)

<br/>

### 3. Select a language (Selecione um idioma)

  - **Language** (Idioma): `Portuguese (Brazil)`
  - Clique em **Continue**

![vBox Hardware](../Imagens/vbox_debian_language.png)

<br/>

### 4. Selecionar sua localidade
  - **Pa√≠s, territ√≥rio ou √°rea**: `Brasil`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_localidade.png)

<br/>

### 5. Configure o teclado
  - **Mapa do teclado a ser usado**: `Portugu√™s Brasileiro`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_teclado.png)

<br/>

### 6. Configure a rede
  - **Nome de m√°quina**: `Firewall`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_hostname.png)

<br/>

  - **Nome de dom√≠nio**: Deixe em branco
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_dominio.png)

<br/>

### 7. Configurar usu√°rios e senhas
  - **Senha do root**: Deixe em branco
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_usuarioroot.png)

<br/>

  - **Nome completo para o novo usu√°rio**: `Usuario`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_nomeusuario.png)

<br/>

  - **Nome de usu√°rio para sua conta**: `usuario`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_nomedeusuario.png)

<br/>

  - **Escolha uma senha para o novo usu√°rio**: Digite uma senha forte
  - **Informe novamente a senha para verifica√ß√£o**: Digite novamente a senha
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_senhausuario.png)

<br/>

### 8. Configurar o rel√≥gio
  - **Selecione um estado ou prov√≠ncia para definir o seu fuso hor√°rio**: Selecione o fuso hor√°rio de sua localidade.
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_fusohorario.png)

<br/>

### 9. Particionar discos
  - **M√©todo de particionamento**: `Assistido - usar o disco inteiro`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_metodopartdisco.png)

<br/>

  - **Selecione o disco a ser particionado**: `SCCI3 (0,0,0)(sda) - 16.1 GB ATA VBOX HARDDISK`. O valor pode ser diferente deste, por√©m, s√≥ vai haver um disco. 
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_selecdisco.png)

<br/>

  - **Esquema de particionamento**: `Todos os arquivos em uma parti√ß√£o (para iniciantes)`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_esquemapartdisco.png)

<br/>

  - **Esta √© uma vis√£o geral de suas parti√ß√µes...**: `Finalizar o particionamento e escrever as mudan√ßas no disco`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_finaldisco.png)

<br/>

  - **Escrever as mudan√ßas nos discos**: `Sim`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_confirmedisco.png)

<br/>

### 10. Configurar o gerenciador de pacotes
  - **Ler m√≠dia de instala√ß√£o adicional ?**: `N√£o`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_midiaadicional.png)

<br/>

  - **Pa√≠s do espelho do reposit√≥rio Debian**: `Brasil`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_paisrepositorio.png)

<br/>

  - **Espelho do reposit√≥rio Debian**: `deb.debian.org`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_espelhorepositorio.png)

<br/>

  - **Informa√ß√£o sobre proxy HTTP (deixe em branco para nenhum)**: Deixe em branco
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_proxyrepositorio.png)

<br/>

### 11. Configurando o popularity-contest
  - **Participar do concurso de utiliza√ß√£o de pacotes ?**: `N√£o`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_popularitypacotes.png)

<br/>

### 12. Sele√ß√£o de software
  - **Escolha o software a ser instalado**: `servidor SSH` e `utilit√°rios de sistema padr√£o`. N√£o use o `Enter` para selecionar, use a `Barra de espaco`. 
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_taskel.png)

<br/>

### 13. Instalar o carregador de inicializa√ß√£o GRUB
  - **Instalar o carregador de inicializa√ß√£o GRUB no seu disco prim√°rio?**: `Sim`
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_grub.png)

<br/>

  - **Dispositivo no qual instalar o carregador de inicializa√ß√£o**: `/dev/sda (ata-VBOX HARDDISK_VBO647671-2719e3b9`. O valor pode ser diferente deste, por√©m, s√≥ vai haver um disco.
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_discgrub.png)

<br/>

### 14. Finalizar a instala√ß√£o
  - Remover a m√≠dia de instala√ß√£o:
    - No menu do VirtualBox clique em **Dispositivos** => **Discos √ìpticos** => **Remover disco do drive virtual**. Se a √∫ltima op√ß√£o estiver apagada √© porque o pr√≥prio VirtualBox j√° removeu o disco. 
  - Clique em **Continuar**

![vBox Hardware](../Imagens/vbox_debian_removerdisp.png)

---

<br/>

## 5) Configura√ß√£o de rede

<br/>

### 1. Coletar os endere√ßos MAC dos adaptadores de rede no VirtualBox:

<br/>

No VirtualBox, selecione a VM **Firewall**, clique em **Configura√ß√µes** e, na janela que abrir, clique em **Rede** no menu lateral.  Relacione o adaptador ao endere√ßo MAC, por exemplo:

![vBox Hardware](../Imagens/vbox_configadapt1_mac.png)

<br/>

  - `Adaptador 1`
    - **Conectado a**: `Placa em modo Bridge`
    - **Endere√ßo MAC**: `080027B70C24`

<br/>

  - `Adaptador 2`
    - **Conectado a**: `Rede Interna`
    - **Nome**: `DMZ`
    - **Endere√ßo MAC**: `0800274F87C0`

<br/>

  - `Adaptador 3`
    - **Conectado a**: `Rede Interna`
    - **Nome**: `LanEmpresa`
    - **Endere√ßo MAC**: `08002773FC47`

<br/>

### 2. Coletar os endere√ßos MAC dos adaptadores de rede Debian:

<br/>

No shell do Debian, liste as interfaces de rede com o comando abaixo

```bash
ip -brief link
```

<br/>

A sa√≠da do comando:

```bash
lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP> 
enp0s3           UP             08:00:27:b7:0c:24 <BROADCAST,MULTICAST,UP,LOWER_UP> 
enp0s8           DOWN           08:00:27:4f:87:c0 <BROADCAST,MULTICAST> 
enp0s9           DOWN           08:00:27:73:fc:47 <BROADCAST,MULTICAST> 
```

<br/>

### 3. Relacionar os interfaces de rede do Debian aos endere√ßo MAC dos adaptadores de rede


Com os dados coleados acima, agora podemos relacionar os adaptadores de rede do VirtualBox com as interfaces de rede do Debian pelo endere√ßo MAC. No meu caso ficar√° da seguinte forma:

<br/>

- **Adaptador 1**
  - **Conectado a**: `Placa em modo Bridge`
  - **Endere√ßo MAC**: `080027B70C24`
  - **Interface**: `enp0s3`


<br/>

- **Adaptador 2**
  - **Conectado a**: `Rede Interna`
  - **Nome**: `DMZ`
  - **Endere√ßo MAC**: `0800274F87C0`
  - **Interface**: `enp0s8`

<br/>

- **Adaptador 3**
  - **Conectado a**: `Rede Interna`
  - **Nome**: `LanEmpresa`
  - **Endere√ßo MAC**: `08002773FC47`
  - **Interface**: `enp0s9`

<br/>

### 34. Configurar IPs no Debian  

<br/>

No shell do Debian, edite o arquivo `/etc/network/interfaces`

```bash
sudo vim /etc/network/interfaces
```

<br/>

ou, use o `nano`:

```bash
sudo nano /etc/network/interfaces
```

<br/>

Segue um exemplo de configura√ß√£o das interfaces de rede. Se atente em atribuir corretamente os endere√ßos IPs as interfaces de rede:

```bash
 This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

source /etc/network/interfaces.d/*

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
allow-hotplug enp0s3
iface enp0s3 inet dhcp

# The secondary network interface
allow-hotplug enp0s8
iface enp0s8 inet static
	address	10.0.2.1
	netmask	255.255.255.0

# The tertiary network interface
allow-hotplug enp0s9
iface enp0s9 inet static
	address	10.0.3.1
	netmask	255.255.255.0
``` 

<br/>

Reinicie o servi√ßo de rede

```bash
sudo systemctl restart networking
```

<br/>


Verifique a configura√ß√£o

```bash
ip addr
```

<br/>


Verifique se tem conex√£o com a Internet

```bash
ping google.com
```

---
