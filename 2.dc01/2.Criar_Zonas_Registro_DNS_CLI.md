# Criar Zonas e Registros DNS usando linhas de comando (CLI) 

Execute estes comandos no servidor DC01.

## Verifique os servidores DC

Digite o comando abaixo:

```bash
host -t srv _ldap._tcp.dc._msdcs.empresatech.example
```

<br/>

Output:

```bash
_ldap._tcp.dc._msdcs.empresatech.example has SRV record 0 100 389 dc01.empresatech.example.
_ldap._tcp.dc._msdcs.empresatech.example has SRV record 0 100 389 dc02.empresatech.example.
```
Se já promoveu o servidor DC02 a Domain Controller, na saída do comando irá aparecer duas linhas, igual está acima.

<br/>

---

## Adicionar registro DNS

Adicionando um registro para o servidor **DHCP01** de IP **192.168.100.203**:

```bash
sudo samba-tool dns add dc01 empresatech.example dhcp01 A 192.168.100.203 -U Administrator
```

<br/>

Teste a configuração:

```bash
host -t A dhcp01
```

<br/>

Output:

```bash
dhcp01.empresatech.example has address 192.168.100.203
```

<br/>


Adicionando um registro para o servidor **FS01** (File Server) de IP **192.168.100.202**:

```bash
sudo samba-tool dns add dc01 empresatech.example fs01 A 192.168.100.202 -U Administrator
```

<br/>

Teste a configuração:

```bash
host -t A fs01
```

<br/>

Output:

```bash
fs01.empresatech.example has address 192.168.100.202
```

<br/>

--- 

## Zona Reversa


### Criar Zona Reversa

Para criar uma Zona Reversa use o comando abaixo:

```bash
sudo samba-tool dns zonecreate dc01 100.168.192.in-addr.arpa -U Administrator
```

<br/>

### Adicionar registro na Zona Reversa

Adicionando um registro em uma Zona Reversa

```bash
sudo samba-tool dns add dc01 100.168.192.in-addr.arpa 200 PTR dc01.empresatech.example -U Administrator
```

<br/>

Teste a configuração:

```bash
host -t PTR 192.168.100.200
```

<br/>

Output:

```bash
200.100.168.192.in-addr.arpa domain name pointer dc01.empresatech.example.
```

<br/>


## Listar Zonas DNS


Para criar uma Zona Reversa use o comando abaixo:

```bash
sudo samba-tool dns zonelist dc01 -U Administrator
```

<br/>

Output:

```bash
  3 zone(s) found

  pszZoneName                 : empresatech.example
  Flags                       : DNS_RPC_ZONE_DSINTEGRATED DNS_RPC_ZONE_UPDATE_SECURE 
  ZoneType                    : DNS_ZONE_TYPE_PRIMARY
  Version                     : 50
  dwDpFlags                   : DNS_DP_AUTOCREATED DNS_DP_DOMAIN_DEFAULT DNS_DP_ENLISTED 
  pszDpFqdn                   : DomainDnsZones.empresatech.example

  pszZoneName                 : 100.168.192.in-addr.arpa
  Flags                       : DNS_RPC_ZONE_DSINTEGRATED DNS_RPC_ZONE_UPDATE_SECURE 
  ZoneType                    : DNS_ZONE_TYPE_PRIMARY
  Version                     : 50
  dwDpFlags                   : DNS_DP_AUTOCREATED DNS_DP_DOMAIN_DEFAULT DNS_DP_ENLISTED 
  pszDpFqdn                   : DomainDnsZones.empresatech.example

  pszZoneName                 : _msdcs.empresatech.example
  Flags                       : DNS_RPC_ZONE_DSINTEGRATED DNS_RPC_ZONE_UPDATE_SECURE 
  ZoneType                    : DNS_ZONE_TYPE_PRIMARY
  Version                     : 50
  dwDpFlags                   : DNS_DP_AUTOCREATED DNS_DP_FOREST_DEFAULT DNS_DP_ENLISTED 
  pszDpFqdn                   : ForestDnsZones.empresatech.example

```